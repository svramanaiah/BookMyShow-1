{% extends "users/basic.html" %}
{% block content %}

<!-- Bootstrap 5 required if not already in base -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body {
        background-color: white;
        color: white;
    }
    .movie-banner {
        background-image: url('{{ movie.image.url }}');
        background-size: cover;
        padding: 40px 20px;
        border-radius: 15px;
        margin-top: 30px;
        
    }
    .movie-poster {
        width: 50px;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(55, 0, 0, 0.2);
    }
    .badge {
        margin-right: 8px;
    }
    .modal-content {
        color: black;
    }
</style>

<div class="container movie-banner d-flex flex-column flex-md-row">
    <!-- Trailer section -->
  <div class="d-flex flex-column flex-md-row align-items-start mb-4">

    <div class="me-4">
        <h3>watch Trailer</h3>
        <a href="{{ movie.trailer }}" target="_blank">
  <img src="https://img.youtube.com/vi/{{ movie.trailer_embed_url|slice:'30:' }}/0.jpg" width="300" />
</a>

      </div>
  </div>

    <div class="flex-grow-1">
        <h2 style>{{ movie.name }}</h2>

        <!-- Rating -->
        <div class="mb-2" style="font-size: 1.2em; font-weight: bold; background-color: #5b5d5fff; padding: 10px; width:300px; border-radius: 5px; color: #333;">
            <span class="badge bg-danger">‚≠ê 9.8/10</span>
            <small>(77.6K Votes)</small>
        </div>

        <!-- Formats -->
        <div class="mb-2">
            {% if movie.is_2d %}<span class="badge bg-light text-dark">2D</span>{% endif %}
            {% if movie.is_3d %}<span class="badge bg-light text-dark">3D</span>{% endif %}
            {% if movie.is_IMAX %}<span class="badge bg-light text-dark">IMAX</span>{% endif %}
        </div>

        <!-- Languages -->
        <div class="mb-2">
            {% for language in movie.language_list %}
                <span class="badge bg-light text-dark">{{ language }}</span>
            {% endfor %}
        </div>
        
        <!-- Duration, Genre, Release Date -->
        <div class="mb-2">
            <strong>Duration:</strong> {{ movie.duration }}
        </div>
        <div class="mb-2">
            <strong>Genre:</strong> {{ movie.genre }}
        </div>
        <div class="mb-2">
            <strong>Release Date:</strong> {{ movie.release_date }}
        </div>

        <!-- Book Button -->
        <button class="btn btn-danger mt-3" data-bs-toggle="modal" data-bs-target="#languageFormatModal">
            Book tickets
        </button>
    </div>
</div>

<!-- Modal for language & format -->
<div class="modal fade" id="languageFormatModal" tabindex="-1" aria-labelledby="languageFormatModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content text-dark">
      <div class="modal-header">
        <h5 class="modal-title" id="languageFormatModalLabel">{{ movie.name }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h6>Select language and format</h6>
        {% for language in movie.language_list %}
          <div class="mb-3">
            <strong>{{ language }}</strong><br>
            {% if movie.is_2d %}
              <a href="{% url 'theater_list' movie.id %}?language={{ language }}&format=2D" class="btn btn-outline-danger btn-sm mt-2">2D</a>
            {% endif %}
            {% if movie.is_3d %}
              <a href="{% url 'theater_list' movie.id %}?language={{ language }}&format=3D" class="btn btn-outline-danger btn-sm mt-2">3D</a>
            {% endif %}
            {% if movie.is_IMAX %}
              <a href="{% url 'theater_list' movie.id %}?language={{ language }}&format=IMAX" class="btn btn-outline-danger btn-sm mt-2">IMAX</a>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<!-- Description -->
<div class="container mt-5 text-black">
    <h4>About the movie</h4>
    <p>{{ movie.description|linebreaks }}</p>
</div>

{% endblock %}
